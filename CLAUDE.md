# CLAUDE.md

Этот файл предоставляет руководство для Claude Code (claude.ai/code) при работе с кодом в этом репозитории.

## Структура проекта

Это полноценное приложение с четким разделением между фронтендом и бэкендом:

- `backend/` - NestJS приложение с Fastify адаптером
- `frontend/` - Статический HTML/CSS/JavaScript фронтенд с Bootstrap

## Разработка бэкенда

### Основные команды
```bash
# Из директории backend/
npm run build           # Сборка приложения
npm run start:dev      # Запуск в режиме разработки с отслеживанием изменений
npm run start:prod     # Запуск в production режиме
npm run lint           # Запуск ESLint с автоматическим исправлением
npm run test           # Запуск unit тестов
npm run test:watch     # Запуск тестов в режиме отслеживания
npm run test:cov       # Запуск тестов с покрытием
npm run test:e2e       # Запуск end-to-end тестов
```

### Архитектура
- **Фреймворк**: NestJS с Fastify адаптером (не Express)
- **TypeScript**: Строгая конфигурация с пользовательскими типами в `src/types/`
- **AI интеграция**: Интеграция с Google Gemini API в модуле `src/ai/`
- **Безопасность**: Helmet, CORS, безопасные сессии и обработка cookie
- **Валидация**: Class-validator с глобальными validation pipes

### Переменные окружения
- `SESSION_SECRET` - Обязательная для управления сессиями
- `PORT` - Порт сервера (по умолчанию 3001)
- `NODE_ENV` - Настройка среды (влияет на настройки безопасности)

### Структура модулей
- Главный модуль приложения импортирует ConfigModule (глобальный) и AIModule
- AI функциональность модулизирована в `src/ai/` с поддержкой Gemini текстового чата
- Глобальный API префикс: `/api`

## Разработка фронтенда

Статический фронтенд использует:
- Bootstrap CSS фреймворк
- Vanilla JavaScript
- Поддержка HLS видео стриминга
- Адаптивный дизайн с компонентами карусели

## Тестирование

- Unit тесты: Jest с ts-jest трансформером
- E2E тесты: Настроены в директории `test/`
- Доступна отчетность по покрытию

## Версия Node.js

Этот проект требует Node.js 22.14.0 и npm 10.9.2 (указано в engines).